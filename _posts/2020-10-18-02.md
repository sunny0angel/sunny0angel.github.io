---
title: 设计一门新语言，并且写一个编译器（2）
date: 2020-10-18 23:01:00
categories: blog
---

## 设计一门新语言，并且写一个编译器（2）

其实，我选择从设计一门新语言，编写一个编译器入手，还有另外一个原因----虽然完整意义上的编译器的逻辑比较复杂，但是，可以一定程度上的简化，并且，工作量要远小于业务功能开发。

下面，我总结一下，我现阶段对于新语言的设计概念，以及实现过程的计划。

1.新语言的设计理念

我的初衷是为了更好的模拟现实世界规律，设计的这门语言，但是由于是第一次，所以有可能，会有很多地方考虑不周，甚至会出现谬误。如果有高人发现，请提出指正。您对我的评价，是我最高的荣幸；您对我的批评，是我最大的收获。

我给我的孩子----我所设计的新语言，取名为，Parallel，意为平行，引申为，设计一个现实的平行宇宙。简称Para。

2.新语言的特性

（🌟以下为该语言的暂定特性，我会随时修改）

1）每一个实例都有一个唯一的索引，该索引的值不会随意变化，该索引被称为实例的真名。真名带有该实例的属性信息，想定为实例通过Hash转换，得到一个固定位数（暂定256位）的数值。

2）真名信息是加密的。通过真名外加密钥，即可访问实体信息

3）根类：WorldTree

4）类分为：有行类和无形类。有形类分为膨胀态，稳定态，收缩态。无形类分为存在态，虚无态，未知态。
有形类是含有实现方法的类。无形类是不含有实现方法的类。每个有形类必须继承一个以上有形类，以及零个以上无形类。

5）通过专门的配置文件，用来管理类之间的继承关系。这个过程我称之为类的进化管理。类之间一系列的继承关系我们称之为进化树。

6）子类可以修改父类的任何属性，子类也可以删除父类的任何属性，但是必须保留一部分父类的属性，否则进化树报错。子类修改父类属性后，生成修改对象父类的兄弟类，并更新进化树。

7）类之间存在墙。墙分为：时间墙，空间墙，种类墙，实例墙。舍弃公有私有概念，通过墙来限制允许访问的范围。

8）编译时，为每个被继承的类生产接口，但是，只有最终实例中使用到的元素，才会被实现，否则元素只存在于接口中。

9）没有类型概念：只有数字，布尔值，字符串，数组和类的区分。

10）变量首位加%，全局变量首位加$。变量定义的第二位不可为数字。
没有双引号，表示为数字。
true/false，表示布尔值。
有双引号，表示为字符串。
[]表示为数组。
首字母大写，表示为类。

11）文件名首字母必须大写，文件后缀名为.para。如果代码文件中没有类的定义的话，默认生成类名为文件名，继承根类，的一个类。
例：Main.para

12）变量名不是必须要被定义，但是如果值明确了的话，可以用 “%”+未定义变量的顺序号 的形式引用该值。
例：%inta = 123；
   456；
   "Pizza";
   print(%1, %2); // 输出：456Pizza
   
13）同理，函数名也不是必须要被定义。函数定义为 F:functionName(x, y) {...}。不定义名称的写法 F:(x, y) {...}。
例：//F:(x, y) {return x+y;}
   //F:(x, y) {return x-y;}
   //print(F:%1(2, 1), " ", F:%2(2, 1)) // 输出：3 1
   
14）循环的写法
例：//[1, 2 ,3 ,4, 5];
    //%inta in %1 {{
    //  print(%inta);
    //  if (%inta == 1) {continue;}
    //  if (%inta == 4) {break;}
    //}} // 输出：23 这里表示数组元素的变量必须定义
